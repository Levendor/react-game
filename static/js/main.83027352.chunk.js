(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],Array(23).concat([function(e,t,s){},function(e,t,s){},function(e,t,s){},,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),a=s(18),r=s.n(a),o=(s(23),s(9)),c=s(2),l=s(10),u=400,d=[0,0],p=10,h=["battlecruiser","cruiser","cruiser","destroyer","destroyer","destroyer","boat","boat","boat","boat"],m=["","\u0430","\u0431","\u0432","\u0433","\u0434","\u0435","\u0436","\u0437","\u0438","\u043a"],f=["1","2","3","4","5","6","7","8","9","10"],j=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],b=["New game","Statistics","Settings","Autoplay","Change user","Music"],g=s(3),v=function(){function e(t,s,n){Object(c.a)(this,e),this.type=void 0,this.length=void 0,this.position=void 0,this.coordinates=void 0,this.stringCoordinates=void 0,this.shipArea=void 0,this.stringShipArea=void 0,this.isWrecked=void 0,this.type=t,this.length=this.getShipSize(t),this.position=s,this.coordinates=this.getShipCoordinates(s,n),this.stringCoordinates=this.coordinates.map((function(e){return e.join("")})),this.shipArea=this.getShipArea(s,n),this.stringShipArea=this.shipArea.map((function(e){return e.join("")})),this.isWrecked=!1}return Object(g.a)(e,[{key:"isVertical",value:function(e){return"vertical"===e}},{key:"getShipSize",value:function(e){switch(e){case"battlecruiser":return 4;case"cruiser":return 3;case"destroyer":return 2;case"boat":return 1;default:return 0}}},{key:"getShipCoordinates",value:function(e,t){var s=this;return new Array(this.length).fill(0).map((function(n,i){return s.isVertical(e)?[t[0]+i,t[1]]:[t[0],t[1]+i]}))}},{key:"getShipArea",value:function(e,t){var s=[],n=t[0]-1,i=t[1]-1;if(this.isVertical(e))for(var a=n;a<n+this.length+2;a++)for(var r=i;r<i+3;r++)s.push([a,r]);else for(var o=n;o<n+3;o++)for(var c=i;c<i+this.length+2;c++)s.push([o,c]);return s}}]),e}(),O=function e(t){var s=this;Object(c.a)(this,e),this.ships=void 0,this.occupiedCells=void 0,this.stringOccupiedCells=void 0,this.field=void 0,this.shots=void 0,this.wreckedShipsArea=void 0,this.difficultyLevel=void 0,this.setDifficultyLevel=function(e){s.difficultyLevel=e},this.createShips=function(){var e=[];return h.forEach((function(t){var n;do{var i=Math.round(Math.random())?"vertical":"horizontal",a=[Math.floor(Math.random()*p),Math.floor(Math.random()*p)];n=new v(t,i,a)}while(s.isShipPlacedWrong(n.coordinates,n.stringCoordinates,e));e.push(n)})),e},this.isShipPlacedWrong=function(e,t,s){var n=t.some((function(e){return s.some((function(t){return t.stringShipArea.includes(e)}))})),i=e.some((function(e){return e.some((function(e){return e>=p}))}));return n||i},this.placeShips=function(e){return e.map((function(e){return Object(l.a)(e.coordinates)})).flat()},this.generateField=function(e){var t=j.map((function(e){return Object(l.a)(e)}));return e.forEach((function(e){e[0]<p&&e[1]<p&&(t[e[0]][e[1]]=1)})),t},this.targeting=function(e){var t=e.join("");return s.shots.includes(t)||s.wreckedShipsArea.includes(t)},this.aiming=function(){var e,t=s.difficultyLevel>1?s.checkCellsNearby(1):[],n=t.length;do{e=n?t[Math.floor(Math.random()*n)]:[Math.floor(Math.random()*p),Math.floor(Math.random()*p)]}while(s.targeting(e));return e},this.shot=function(e){s.shots.push(e.join(""));var t=s.getWreckedShipArea(e),n=t?t.shipArea:[],i=t?t.stringShipArea:[];return s.wreckedShipsArea=Array.from(new Set([].concat(Object(l.a)(s.wreckedShipsArea),Object(l.a)(i)))),(t?[e].concat(Object(l.a)(n)):[e]).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];s.field=s.field.map((function(e,t){return t===n?e.map((function(e,t){return t===i?0===e?3:1===e?2:e:e})):e}))})),s.field},this.whatIsThisShip=function(e){return s.ships.find((function(t){return t.stringCoordinates.includes(e.join(""))}))},this.isShipWrecked=function(e){return e.stringCoordinates.every((function(e){return s.shots.includes(e)}))},this.getWreckedShipArea=function(e){var t=s.whatIsThisShip(e);if(t&&s.isShipWrecked(t))return t.isWrecked=!0,t},this.isHit=function(e){var t=e||s.shots[s.shots.length-1];return s.stringOccupiedCells.some((function(e){return e===t}))},this.getCellsNearby=function(e){var t=+e[0],s=+e[1];return[[t+1,s],[t-1,s],[t,s+1],[t,s-1]]},this.isIntactCell=function(e){var t=e.join("");return!s.shots.includes(t)&&!s.wreckedShipsArea.includes(t)},this.isCellWithinBattlefield=function(e){return e.every((function(e){return e>=0&&e<p}))},this.checkCellsNearby=function(e){if(e>4)return[];var t=s.shots[s.shots.length-e];if(s.isHit(t)){var n=s.getCellsNearby(t).filter(s.isCellWithinBattlefield),i=n.filter(s.isIntactCell);if(!i.length)return[];var a=(s.difficultyLevel>2?s.isLongShipGetHerAnotherDecks(t,n):[]).filter(s.isIntactCell);return a.length?a:i}return s.checkCellsNearby(e+1)},this.isLongShipGetHerAnotherDecks=function(e,t){var n,i=e.split(""),a=t.find((function(e){return s.shots.includes(e.join(""))&&s.stringOccupiedCells.includes(e.join(""))}));if(a){var r=Math.abs(+i[0]-a[0]),o=Math.abs(+i[1]-a[1]);n=1===r?[[+i[0]+1,+i[1]],[a[0]-1,a[1]],[a[0]+1,+i[1]],[+i[0]-1,a[1]]]:1===o?[[+i[0],+i[1]+1],[a[0],a[1]+1],[a[0],+i[1]-1],[+i[0],a[1]-1]]:[]}else n=[];return n},this.ships=t?[]:this.createShips(),this.occupiedCells=t?[]:this.placeShips(this.ships),this.stringOccupiedCells=t?[]:this.occupiedCells.map((function(e){return e.join("")})),this.field=t?[]:this.generateField(this.occupiedCells),this.shots=[],this.wreckedShipsArea=[],this.difficultyLevel=3,t&&Object.assign(this,t)};function y(e){return(e+1)%2}function S(e,t,s){return"ascending"===s?e-t:"descending"===s?t-e:"random"===s?Math.random()-.5:0}var x=s(17),C=s(5),N=s(4),w=(s(24),s(25),s(0)),k=function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props.position,t="top"===e?m:f;return Object(w.jsx)("div",{className:"".concat(e,"-line"),children:t.map((function(t){return Object(w.jsx)("div",{className:"cell disabled ".concat(e,"-line-cell"),children:t.toUpperCase()},"".concat(e).concat(t))}))})}}]),s}(n.Component),F=s(8),A=s(7),L=s(12),M={HEADER_BUTTONS_SYMBOLS:[A.i,A.a,A.k,A.f,A.m],DOT:A.c,CROSS:A.j,SQUARE:L.a,OK:A.b,USER:A.l,MUSIC:A.e,STOP:A.h,FULLSCREEN:A.d},T=(s(32),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"cellContent",value:function(e){var t=this.props,s=t.side,n=t.isAutoGame;switch(e){case 0:return"";case 1:return"foe"!==s||n?Object(w.jsx)(F.a,{icon:M.SQUARE,size:"4x"}):"";case 2:return Object(w.jsx)(F.a,{icon:M.CROSS,size:"4x"});case 3:return Object(w.jsx)(F.a,{icon:M.DOT,size:"xs"});default:return""}}},{key:"render",value:function(){var e=this.props,t=e.value,s=e.coordinates,n=e.onCellClick,i=this.cellContent(t);return Object(w.jsx)("div",{className:i?2===t?"cell grid-cell shake-cell disabled":"cell grid-cell disabled":"cell grid-cell",onClick:function(){n&&n(s,t)},style:{gridArea:"cell-".concat(s.join(""))},children:i})}}]),s}(n.Component)),G=function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.side,s=e.field,n=e.onCellClick,i=e.isAutoGame,a=i?"battlefield disabled":"foe"===t?"battlefield":"battlefield disabled";return Object(w.jsxs)("div",{className:a,style:{gridArea:"".concat(t)},children:[Object(w.jsx)(k,{position:"top"}),Object(w.jsx)(k,{position:"left"}),s.map((function(e,s){return e.map((function(e,a){return Object(w.jsx)(T,{value:e,side:t,isAutoGame:i,coordinates:[s,a],onCellClick:n},"".concat(s).concat(a))}))}))]})}}]),s}(n.Component),U=s.p+"static/media/rs_school_js.ad178c0d.svg",W=(s(33),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(w.jsxs)("footer",{className:"footer border",children:[Object(w.jsx)("div",{className:"footer_links",children:Object(w.jsx)("a",{href:"https://github.com/Levendor",children:Object(w.jsx)("span",{children:"[GitHub] Levendor"})})}),Object(w.jsx)("span",{className:"footer_year",children:"2021"}),Object(w.jsx)("div",{className:"footer_logo",children:Object(w.jsx)("a",{href:"https://rs.school/js/",children:Object(w.jsx)("img",{className:"footer_img",src:U,alt:"logo"})})})]})}}]),s}(n.Component)),V=(s(34),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).getProperLetter=function(e){switch(e){case"New game":return"N";case"Statistics":return"S";case"Settings":return"P";case"Autoplay":return"R";case"Change user":return"U";case"Music":return"M";case"Fullscreen":return"F"}},e.componentDidMount=function(){document.addEventListener("keypress",(function(t){t.code==="Key".concat(e.getProperLetter(e.props.title))&&!0===t.shiftKey&&e.props.onButtonClick()}))},e.onKeyPress=function(t){t.code==="Key".concat(e.getProperLetter(e.props.title))&&!0===t.shiftKey&&e.props.onButtonClick()},e}return Object(g.a)(s,[{key:"render",value:function(){return Object(w.jsx)("button",{id:this.props.title,title:"".concat(this.props.title,": Shift + ").concat(this.getProperLetter(this.props.title)),className:"header-button",onClick:this.props.onButtonClick,type:"button",onKeyPress:this.onKeyPress,children:Object(w.jsx)(F.a,{icon:this.props.faIcon,size:"lg"})})}}]),s}(n.Component)),B=(s(35),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.callbacks,s=e.isPlay,n=M.HEADER_BUTTONS_SYMBOLS,i=b;return Object(w.jsxs)("header",{className:"header border",children:[Object(w.jsx)("span",{className:"header_title",children:"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"}),Object(w.jsxs)("nav",{className:"header_navbar",children:[i.map((function(e,i){var a;return a="Music"===e?s?M.STOP:M.MUSIC:n[i],Object(w.jsx)(V,{title:e,onButtonClick:function(){return t[i](e)},faIcon:a},e)})),Object(w.jsx)(V,{title:"Fullscreen",onButtonClick:function(){return t[t.length-1]("Fullscreen")},faIcon:M.FULLSCREEN},"Fullscreen")]})]})}}]),s}(n.Component)),P=(s(36),s(37),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props.faIcon;return Object(w.jsx)("div",{className:"win-counter",children:e.map((function(e,t){return Object(w.jsx)(F.a,{icon:e,size:"2x"},t)}))})}}]),s}(n.Component)),I=(s(38),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e,t=this.props.playerName;(t?t.length:0)>11&&(t="".concat(null===(e=t)||void 0===e?void 0:e.slice(0,10),"..."));return Object(w.jsx)("div",{className:"player-name",children:Object(w.jsx)("span",{className:"player-name_text",children:t})})}}]),s}(n.Component)),R=(s(39),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props.score?this.props.score:[],t=Object(o.a)(e,2),s=t[0],n=t[1];return Object(w.jsx)("div",{className:"score-counter",children:Object(w.jsxs)("span",{className:"score-counter_score",children:[Object(w.jsx)("span",{children:s}),Object(w.jsx)("span",{children:":"}),Object(w.jsx)("span",{children:n})]})})}}]),s}(n.Component)),_=function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.bestOf,s=e.score,n=s||[],i=Object(o.a)(n,2),a=i[0],r=i[1],c=new Array(t).fill(A.g,0,a).fill(L.b,a),l=new Array(t).fill(A.g,0,r).fill(L.b,r).reverse(),u=this.props.players?this.props.players:[],d=Object(o.a)(u,2),p=d[0],h=d[1];return Object(w.jsxs)("div",{className:"score-line border",children:[Object(w.jsx)(P,{faIcon:c}),Object(w.jsx)(I,{playerName:p}),Object(w.jsx)(R,{score:s}),Object(w.jsx)(I,{playerName:h}),Object(w.jsx)(P,{faIcon:l})]})}}]),s}(n.Component);s(40);var D=function(e){return Object(w.jsxs)("div",{className:"moves-counter",children:[Object(w.jsx)("span",{className:"moves-counter_title",children:"\u0425\u043e\u0434\u043e\u0432:"}),Object(w.jsxs)("div",{className:"moves-counter_container",children:[Object(w.jsxs)("div",{className:"moves-counter_container_small",children:[Object(w.jsx)("span",{className:"moves-counter_text",children:e.player1Title}),Object(w.jsx)("span",{className:"moves-counter_numbers",children:e.player1Counter})]}),Object(w.jsxs)("div",{className:"moves-counter_container_small",children:[Object(w.jsx)("span",{className:"moves-counter_text",children:e.player2Title}),Object(w.jsx)("span",{className:"moves-counter_numbers",children:e.player2Counter})]})]})]})},E=(s(41),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.userName,s=e.gamesTotal,n=e.gamesWon,i=s?(n/s).toFixed(2):0;return Object(w.jsxs)("div",{className:"statistics-container",children:[Object(w.jsx)("h3",{className:"statistics-title",children:t}),Object(w.jsxs)("span",{className:"statistics-text",children:["Games total:",Object(w.jsx)("span",{className:"statistics-value",children:s})]}),Object(w.jsxs)("span",{className:"statistics-text",children:["Games won:",Object(w.jsx)("span",{className:"statistics-value",children:n})]}),Object(w.jsxs)("span",{className:"statistics-text",children:["Win ratio:",Object(w.jsx)("span",{className:"statistics-value",children:i})]})]})}}]),s}(n.Component)),z=(s(42),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).getDifficultyLabel=function(e){switch("".concat(e)){case"1":return"Easy";case"2":return"Normal";case"3":return"Hard";default:return""}},e.getAudioLabel=function(e){switch("".concat(e)){case"0":return"Mute";case"0.5":return"Quiet";case"1":return"Normal";default:return""}},e.getMusicLabel=function(e){switch("".concat(e)){case"0":return"Mute";case"0.05":return"Quiet";case"0.1":return"Normal";default:return""}},e.getThemeLabel=function(e){switch("".concat(e)){case"1":return"Light";case"2":return"Dark";default:return""}},e.onDifficultyChange=function(t){e.props.onDifficultyChange(+t.target.value)},e.onBestOfChange=function(t){e.props.onBestOfChange(+t.target.value)},e.onAudioChange=function(t){e.props.onAudioChange(+t.target.value)},e.onMusicChange=function(t){e.props.onMusicChange(+t.target.value)},e.onThemeChange=function(t){e.props.onThemeChange(+t.target.value)},e}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.difficultyValue,s=e.bestOfValue,n=e.audioValue,i=e.musicRenderValue,a=e.themeValue,r=this.getDifficultyLabel(t),o=this.getAudioLabel(n),c=this.getMusicLabel(i),l=this.getThemeLabel(a);return Object(w.jsxs)("div",{className:"settings-container",children:[Object(w.jsxs)("div",{className:"settings-difficulty",children:[Object(w.jsxs)("h3",{children:["Difficulty level:",Object(w.jsx)("label",{htmlFor:"difficulty",children:r})]}),Object(w.jsx)("input",{id:"difficulty",type:"range",value:t,onChange:this.onDifficultyChange,min:"1",max:"3",step:"1",list:"difficultyList"}),Object(w.jsxs)("datalist",{id:"difficultyList",children:[Object(w.jsx)("option",{value:"1"}),Object(w.jsx)("option",{value:"2"}),Object(w.jsx)("option",{value:"3"})]})]}),Object(w.jsxs)("div",{className:"settings-best-of",children:[Object(w.jsxs)("h3",{children:["Best of:",Object(w.jsx)("label",{htmlFor:"bestOf",children:s})]}),Object(w.jsx)("input",{id:"bestOf",type:"range",value:s,onChange:this.onBestOfChange,min:"1",max:"3",step:"1",list:"bestOfList"}),Object(w.jsxs)("datalist",{id:"bestOfList",children:[Object(w.jsx)("option",{value:"1"}),Object(w.jsx)("option",{value:"2"}),Object(w.jsx)("option",{value:"3"})]})]}),Object(w.jsxs)("div",{className:"settings-audio",children:[Object(w.jsxs)("h3",{children:["Sound volume:",Object(w.jsx)("label",{htmlFor:"audio",children:o})]}),Object(w.jsx)("input",{id:"audio",type:"range",value:n,onChange:this.onAudioChange,min:"0",max:"1",step:"0.5",list:"audioList"}),Object(w.jsxs)("datalist",{id:"audioList",children:[Object(w.jsx)("option",{value:"0"}),Object(w.jsx)("option",{value:"0.5"}),Object(w.jsx)("option",{value:"1"})]})]}),Object(w.jsxs)("div",{className:"settings-music",children:[Object(w.jsxs)("h3",{children:["Music volume:",Object(w.jsx)("label",{htmlFor:"music",children:c})]}),Object(w.jsx)("input",{id:"music",type:"range",value:i,onChange:this.onMusicChange,min:"0",max:"0.1",step:"0.05",list:"musicList"}),Object(w.jsxs)("datalist",{id:"musicList",children:[Object(w.jsx)("option",{value:"0"}),Object(w.jsx)("option",{value:"0.05"}),Object(w.jsx)("option",{value:"0.1"})]})]}),Object(w.jsxs)("div",{className:"settings-theme",children:[Object(w.jsxs)("h3",{children:["Theme:",Object(w.jsx)("label",{htmlFor:"theme",children:l})]}),Object(w.jsx)("input",{id:"theme",type:"range",value:a,onChange:this.onThemeChange,min:"1",max:"2",step:"1",list:"themeList"}),Object(w.jsxs)("datalist",{id:"themeList",children:[Object(w.jsx)("option",{value:"1"}),Object(w.jsx)("option",{value:"2"})]})]})]})}}]),s}(n.Component)),H=(s(43),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).onButtonClick=function(){var e=n.state,t=e.inputValue,s=e.selectedValue,i=n.props.userName,a=t||s||i;n.props.onUserButtonClick(a)},n.onInputChange=function(e){n.setState({inputValue:e.target.value})},n.onSelectUser=function(e){n.setState({selectedValue:e.target.value})},n.state={inputValue:"",selectedValue:""},n}return Object(g.a)(s,[{key:"render",value:function(){var e=this.state.inputValue,t=this.props.userList;return Object(w.jsxs)("div",{className:"change-user-container",children:[Object(w.jsxs)("div",{className:"change-user-input-container",children:[Object(w.jsx)("input",{value:e,type:"text",placeholder:"type user name",className:"change-user-input",onChange:this.onInputChange}),Object(w.jsx)("button",{className:"change-user-submit",onClick:this.onButtonClick,children:Object(w.jsx)(F.a,{icon:M.USER,size:"lg"})})]}),Object(w.jsx)("div",{className:"change-user-list-container",children:Object(w.jsx)("select",{className:"change-user-list",size:10,onChange:this.onSelectUser,children:t.map((function(e){return Object(w.jsx)("option",{value:e,children:e},e)}))})})]})}}]),s}(n.Component)),K=(s(44),function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).getComponent=function(t){var s=e.props,n=s.userName,i=s.gamesTotal,a=s.gamesWon,r=s.onDifficultyChange,o=s.difficultLevel,c=s.bestOfValue,l=s.onBestOfChange,u=s.audioValue,d=s.onAudioChange,p=s.musicRenderValue,h=s.musicValue,m=s.onMusicChange,f=s.themeValue,j=s.onThemeChange,b=s.userList,g=s.onUserButtonClick;switch(t){case"Statistics":return Object(w.jsx)(E,{userName:n,gamesTotal:i,gamesWon:a});case"Settings":return Object(w.jsx)(z,{difficultyValue:o,onDifficultyChange:r,bestOfValue:c,onBestOfChange:l,audioValue:u,onAudioChange:d,musicRenderValue:p,musicValue:h,onMusicChange:m,themeValue:f,onThemeChange:j});case"Change User":return Object(w.jsx)(H,{userName:n,userList:b,onUserButtonClick:g});default:return";"}},e}return Object(g.a)(s,[{key:"render",value:function(){var e=this.props,t=e.modalWindow,s=e.onCloseButtonClick,n=t?"modal border":"modal border hidden",i=this.getComponent(t);return Object(w.jsxs)("div",{className:n,children:[Object(w.jsx)("h2",{className:"modal-title",children:t}),i,Object(w.jsx)("button",{className:"modal-button",type:"button",onClick:function(){return s()},children:Object(w.jsx)(F.a,{icon:M.OK,size:"lg"})})]})}}]),s}(n.Component)),J=s.p+"static/media/1.9357c518.mp3",Q=s.p+"static/media/1.1855a7c5.mp3",q=s.p+"static/media/2.435c1fec.mp3",Y=s.p+"static/media/1.dc1d7968.mp3",X=s.p+"static/media/2.6b6ccb15.mp3",Z=s.p+"static/media/3.bcafe12e.mp3",$=s.p+"static/media/4.afa8e532.mp3",ee=s.p+"static/media/1.0d56ab12.mp3",te=s.p+"static/media/2.01b2d62d.mp3",se=s.p+"static/media/3.521a6e5b.mp3",ne=s.p+"static/media/4.2d0c17bf.mp3",ie=s.p+"static/media/5.8a3c342a.mp3",ae=s.p+"static/media/music.2d28181d.mp3";s(45),s(46);var re=function(e){var t=e.text,s=t?"popup popup-anim":"popup";return Object(w.jsx)("div",{className:s,children:Object(w.jsx)("span",{className:"popup-text",children:t})})},oe=function(e){Object(C.a)(s,e);var t=Object(N.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).crushSounds=void 0,n.hitSounds=void 0,n.missSounds=void 0,n.shotSounds=void 0,n.music=void 0,n.newGame=function(e){var t=e?n.props.model.start(e):n.props.model.newGame();n.setState({disabledApp:!1,disabledField:!1,isAutoGame:!1,currentBestOf:t.bestOf,score:t.score,player1Field:t.player1Field.field,player1Moves:n.props.model.game.player1Field.shots.length,player2Field:t.player2Field.field,player2Moves:n.props.model.game.player2Field.shots.length})},n.newRound=function(){n.props.model.newRound(),n.setState({disabledApp:!1,disabledField:!1,isAutoGame:!1,currentBestOf:n.props.model.game.bestOf,score:n.props.model.game.score,player1Field:n.props.model.game.player1Field.field,player1Moves:n.props.model.game.player1Field.shots.length,player2Field:n.props.model.game.player2Field.field,player2Moves:n.props.model.game.player2Field.shots.length})},n.autoGame=function(e){var t=[n.props.model.game.player1Field,n.props.model.game.player2Field];void 0===n.props.model.isRoundOverGetWinner(t)?(n.setState({disabledApp:!0,isAutoGame:!0}),e?n.compStrike("player2",t[e],e):n.compStrike("player1",t[e],e)):n.setState({disabledApp:!1})},n.compStrike=function(e,t,s){var i;n.playSound(n.shotSounds);var a=t.aiming(),r=a.join(""),o=t.shot(a),c="".concat(e,"Field"),l=t.shots.length,d="".concat(e,"Moves");n.setState((i={},Object(x.a)(i,c,o),Object(x.a)(i,d,l),i)),t.isHit(r)?setTimeout((function(){setTimeout((function(){return n.playSound(n.hitSounds)}),u),n.autoGame(s)}),1e3):setTimeout((function(){setTimeout((function(){return n.playSound(n.missSounds)}),u),n.autoGame(y(s))}),1e3)},n.blowsExchange=function(e){n.playSound(n.shotSounds);var t=n.props.model.game.player2Field.shot(e),s=n.props.model.game.player2Field.shots.length;n.setState({player2Field:t,player1Moves:s,disabledApp:!0});var i=n.props.model.game.player2Field.whatIsThisShip(e);n.isWinGameOrRound(!0),i?(setTimeout((function(){n.playSound(n.hitSounds),i.isWrecked?(n.showPopup("\u0423\u0431\u0438\u043b!"),setTimeout((function(){return n.playSound(n.crushSounds)}),300)):n.showPopup("\u041f\u043e\u043f\u0430\u043b")}),u),n.setState({disabledApp:!1})):(setTimeout((function(){n.playSound(n.missSounds),n.showPopup("\u041c\u0438\u043c\u043e")}),u),n.enemyStrike())},n.isWinGameOrRound=function(e){var t=[n.props.model.game.player1Field,n.props.model.game.player2Field],s=n.props.model.isRoundOverGetWinner(t);if(void 0!==s)return n.props.model.setScore(s),console.log(e?"\u0422\u044b \u0432\u044b\u0438\u0433\u0440\u0430\u043b \u044d\u0442\u043e\u0442 \u0440\u0430\u0443\u043d\u0434!":"\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0432\u044b\u0438\u0433\u0440\u0430\u043b \u044d\u0442\u043e\u0442 \u0440\u0430\u0443\u043d\u0434"),void(n.props.model.isGameOver()?(console.log(e?"\u041f\u043e\u0431\u0435\u0434\u0430! \u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!":"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430! \u0422\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b"),n.setState({disabledField:!0,disabledApp:!1}),n.props.model.finishGame()):setTimeout(n.newRound,5e3))},n.openStatistics=function(){n.setState({modalWindow:"Statistics"})},n.openSettings=function(){n.setState({modalWindow:"Settings"})},n.onDifficultyChange=function(e){n.props.model.changeDifficultyLevel(e);var t=n.props.model.player1.difficultyLevel;n.setState({difficultyLevel:t})},n.onBestOfChange=function(e){n.props.model.setBestOf(e);var t=n.props.model.bestOf;n.setState({bestOf:t})},n.onAudioChange=function(e){n.setState({audioValue:e})},n.onMusicChange=function(e){n.setState({musicValue:e}),n.music.volume=e},n.onThemeChange=function(e){var t;n.setState({themeValue:e}),null===(t=document.querySelector("html"))||void 0===t||t.classList.toggle("inverted")},n.openChangeUser=function(){n.setState({modalWindow:"Change User"})},n.getUserList=function(){return n.props.model.users.map((function(e){return e.name}))},n.newUser=function(e){n.props.model.newUser(e);var t=n.props.model.player1,s=t.name,i=t.games,a=t.gamesWon;n.setState({user1Name:s,player1GamesTotal:i,player1GamesWon:a}),n.newGame(e)},n.closeModal=function(){n.setState({modalWindow:""})},n.playSound=function(e){var t=Math.floor(Math.random()*e.length),s=new Audio(e[t]);s.volume=n.state.audioValue,s.play()},n.toggleMusic=function(){n.state.musicStarted?n.state.isPlay?(n.music.pause(),n.setState({isPlay:!1})):(n.music.play(),n.setState({isPlay:!0})):(n.setState({isPlay:!0,musicStarted:!0}),n.music.play())},n.showPopup=function(e){n.setState({popupText:e}),setTimeout(n.hidePopup,500)},n.hidePopup=function(){n.setState({popupText:""})},n.goFullScreen=function(){var e=document.getElementById("wrapper");null===e||void 0===e||e.requestFullscreen()},n.restoreFullScreen=function(){document.exitFullscreen().catch((function(e){return Promise.resolve(e)}))},n.state={bestOf:n.props.model.bestOf,currentBestOf:n.props.model.game.bestOf,score:n.props.model.game.score,user1Name:n.props.model.player1.name,player1GamesTotal:n.props.model.player1.games,player1GamesWon:n.props.model.player1.gamesWon,player1Field:n.props.model.game.player1Field.field,player1Moves:n.props.model.game.player1Field.shots.length,difficultyLevel:n.props.model.player1.difficultyLevel,user2Name:n.props.model.player2,player2Field:n.props.model.game.player2Field.field,player2Moves:n.props.model.game.player2Field.shots.length,modalWindow:"",audioValue:1,musicValue:.1,themeValue:1,disabledApp:!1,disabledField:!1,isAutoGame:!1,musicStarted:!1,isPlay:!1,popupText:""},n.crushSounds=[J],n.hitSounds=[Q,q],n.missSounds=[Y,X,Z,$],n.shotSounds=[ee,te,se,ne,ie],n.music=new Audio(ae),n.music.volume=n.state.musicValue,n.music.loop=!0,n}return Object(g.a)(s,[{key:"enemyStrike",value:function(){var e=this;this.isWinGameOrRound(!1),setTimeout((function(){e.playSound(e.shotSounds);var t=e.props.model.game.player1Field.aiming(),s=e.props.model.game.player1Field.shot(t),n=e.props.model.game.player1Field.shots.length;e.setState({popupText:"",player1Field:s,player2Moves:n});var i=e.props.model.game.player1Field.whatIsThisShip(t);e.props.model.saveGame(),i?(setTimeout((function(){e.playSound(e.hitSounds),i.isWrecked?(e.showPopup("\u0423\u0431\u0438\u043b!"),setTimeout((function(){return e.playSound(e.crushSounds)}),300)):e.showPopup("\u041f\u043e\u043f\u0430\u043b")}),u),e.enemyStrike()):(setTimeout((function(){e.playSound(e.missSounds),e.showPopup("\u041c\u0438\u043c\u043e")}),u),e.setState({disabledApp:!1}))}),1e3)}},{key:"render",value:function(){var e=this,t=this.state,s=t.user1Name,n=t.player1GamesTotal,i=t.player1GamesWon,a=t.user2Name,r=t.disabledApp,o=t.disabledField,c=t.isAutoGame,l=t.player1Moves,u=t.player2Moves,d=t.player1Field,p=t.player2Field,h=t.bestOf,m=t.currentBestOf,f=t.score,j=t.modalWindow,b=t.difficultyLevel,g=t.audioValue,v=t.musicValue,O=t.themeValue,y=t.isPlay,S=t.popupText,x=r?"disabled":"",C=c||o?"disabled":"",N=c?"\u043a\u043e\u043c\u043f\u0430 1:":"\u0442\u0432\u043e\u0438\u0445:",k=c?"\u043a\u043e\u043c\u043f\u0430 2:":"\u043a\u043e\u043c\u043f\u0430:";return Object(w.jsxs)("div",{className:"app ".concat(x),children:[Object(w.jsx)(re,{text:S}),Object(w.jsx)(K,{modalWindow:j,onCloseButtonClick:this.closeModal,userName:s,gamesTotal:n,gamesWon:i,difficultLevel:b,onDifficultyChange:this.onDifficultyChange,bestOfValue:h,onBestOfChange:this.onBestOfChange,audioValue:g,onAudioChange:this.onAudioChange,musicRenderValue:v,musicValue:this.music.volume,onMusicChange:this.onMusicChange,themeValue:O,onThemeChange:this.onThemeChange,userList:this.getUserList(),onUserButtonClick:this.newUser}),";",Object(w.jsx)(B,{isPlay:y,callbacks:[this.newGame,this.openStatistics,this.openSettings,function(){e.newGame(),e.autoGame(0)},this.openChangeUser,this.toggleMusic,this.goFullScreen]}),Object(w.jsx)(_,{bestOf:m,score:f,players:[s,a]}),Object(w.jsxs)("div",{id:"wrapper",className:"battlefield-container border ".concat(C),children:[Object(w.jsx)(G,{side:"friend",field:d}),Object(w.jsx)(D,{player1Counter:l,player2Counter:u,player1Title:N,player2Title:k}),Object(w.jsx)(G,{side:"foe",field:p,onCellClick:this.blowsExchange,isAutoGame:c})]}),Object(w.jsx)(W,{})]})}}]),s}(n.Component),ce=new function e(){var t=this;Object(c.a)(this,e),this.users=void 0,this.game=void 0,this.bestOf=void 0,this.player1=void 0,this.player2=void 0,this.start=function(e){var s=e?t.getGameFromStorage(e):void 0;return s?t.loadGame(JSON.parse(s)):t.newGame()},this.setBestOf=function(e){t.bestOf=e},this.setScore=function(e){t.game.score[y(e)]++},this.finishGame=function(){var e=Object(o.a)(t.game.score,2),s=e[0],n=e[1];t.player1.addGame(s>n),t.saveUserStatistics()},this.isGameOver=function(){return t.game.score.some((function(e){return e===t.game.bestOf}))},this.isRoundOverGetWinner=function(e){var t=e.findIndex((function(e){return e.ships.every((function(e){return e.isWrecked}))}));if(-1!==t)return t},this.newRound=function(){t.game={bestOf:t.game.bestOf,score:t.game.score,player1Field:new O,player2Field:new O},t.saveGame()},this.newGame=function(){var e={bestOf:t.bestOf,score:d,player1Field:new O,player2Field:new O};return t.game=e,t.saveGame(),e},this.saveGame=function(){var e=JSON.stringify(t.game);localStorage.setItem("levendor-react-game-".concat(t.player1.name),e)},this.getGameFromStorage=function(e){return localStorage.getItem("levendor-react-game-".concat(e))},this.loadGame=function(e){return{bestOf:e.bestOf,score:e.score,player1Field:new O(e.player1Field),player2Field:new O(e.player2Field)}},this.newUser=function(e){if(t.player1&&e===t.player1.name)return t.player1;var s={name:e||"player 1",games:0,gamesWon:0,difficultyLevel:3,addGame:function(e){this.games+=1,e&&(this.gamesWon+=1)}},n=t.getUserFromUsersStorage(s.name);return n?Object.assign(s,n):t.addUserToUsersStorage(s),t.setUser(s.name),t.player1=s,s},this.setUser=function(e){localStorage.setItem("levendor-react-game-user",e)},this.loadCurrentUserName=function(){return localStorage.getItem("levendor-react-game-user")},this.addUserToUsersStorage=function(e){t.users.push(e),t.users.sort((function(e,t){return S(e.gamesWon,t.gamesWon,"descending")})),localStorage.setItem("levendor-react-game-users",JSON.stringify(t.users))},this.saveUserStatistics=function(){var e=t.getUserIndexFromUsersStorage(t.player1.name);e>-1&&(Object.assign(t.users[e],t.player1),t.users.sort((function(e,t){return S(e.gamesWon,t.gamesWon,"descending")})))},this.getUsersStorage=function(){var e=localStorage.getItem("levendor-react-game-users");return e?JSON.parse(e):[]},this.getUserIndexFromUsersStorage=function(e){return t.users.findIndex((function(t){return t.name===e}))},this.getUserFromUsersStorage=function(e){return t.users.find((function(t){return t.name===e}))},this.changeDifficultyLevel=function(e){t.player1.difficultyLevel=e};var s=this.loadCurrentUserName();this.users=this.getUsersStorage(),this.bestOf=1,this.player1=s?this.newUser(s):this.newUser(),this.game=s?this.start(s):this.start(),this.player2="computer"};r.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(oe,{model:ce})}),document.getElementById("root"))}]),[[47,1,2]]]);
//# sourceMappingURL=main.83027352.chunk.js.map